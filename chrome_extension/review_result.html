<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Shoä¸‰Room ë¦¬ë·° ë¶„ì„</title>
  <style>
    /* ===== Reset & ê¸°ë³¸ ì„¤ì • ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", sans-serif;
      background-color: #fafafa;
      color: #484848;
      line-height: 1.6;
      padding: 20px 0;
    }
    a {
      text-decoration: none;
      color: inherit;
    }

    /* ===== ì „ì²´ ì»¨í…Œì´ë„ˆ ===== */
    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: 0 16px;
    }
    h1 {
      font-size: 1.75rem;
      color: #383838;
      text-align: center;
      margin-bottom: 24px;
    }

    /* ===== í† í”½ í•„í„° ë²„íŠ¼ ê·¸ë£¹ (sticky ì²˜ë¦¬) ===== */
    .filter-group {
      position: sticky;
      top: 0;
      background: #fafafa;
      padding-top: 12px;
      padding-bottom: 12px;
      z-index: 10;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-bottom: 24px;
    }
    .filter-btn {
      font-size: 0.95rem;
      padding: 8px 16px;
      border-radius: 16px;
      border: 1px solid #ebebeb;
      background-color: #fff;
      color: #484848;
      cursor: pointer;
      transition: background-color 0.2s ease, color 0.2s ease;
    }
    .filter-btn:hover {
      background-color: #f0f0f0;
    }
    .filter-btn.active {
      background-color: #ff5a5f;
      color: #fff;
      border-color: #ff5a5f;
    }

    /* ===== í† í”½ ì¹´ë“œ (í† í”½ë³„ ë””ìì¸) ===== */
    .topic-card {
      background-color: #fff;
      border: 1px solid #ebebeb;
      border-radius: 12px;
      margin-bottom: 24px;
      overflow: hidden;
      transition: box-shadow 0.2s ease;
      position: relative;
    }
    .topic-card:hover {
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* ===== ì¹´ë“œ í—¤ë” ===== */
    .topic-header {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid #ebebeb;
      background-color: #fff;
      position: relative;
    }
    .topic-icon {
      font-size: 1.3rem;
      margin-right: 8px;
      z-index: 1;
    }
    .topic-header h3 {
      position: relative;
      font-size: 1.125rem;
      color: #222222;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      z-index: 1;
    }

    /* ===== í† í”½ë³„ í‚¤ ì»¬ëŸ¬ ===== */
    .topic-card[data-topic="ì²­ê²°ë„"] {
      border-left: 4px solid #A8E6CF;
    }
    .topic-card[data-topic="ìœ„ì¹˜"] {
      border-left: 4px solid #82CAFA;
    }
    .topic-card[data-topic="ê°€ê²©"] {
      background-color: #FFF8E1;
      border-left: 4px solid #FFB74D;
    }
    .topic-card[data-topic="ì‹œì„¤"] {
      border-left: 4px solid #B0BEC5;
    }
    .topic-card[data-topic="í˜¸ìŠ¤íŠ¸"] {
      border-left: 4px solid #FF8A80;
    }
    .topic-card[data-topic="ì†ŒìŒ"] {
      border-left: 4px solid #607D8B;
    }

    /* ===== ë³¸ë¬¸ ë¦¬ë·° ë¦¬ìŠ¤íŠ¸ ===== */
    .review-list {
      list-style: none;
      padding: 0;
    }
    .review-list li {
      padding: 14px 20px;
      font-size: 0.95rem;
      color: #484848;
      border-bottom: 1px solid #f0f0f0;
      background-color: #fff;
      transition: background-color 0.15s ease;
    }
    .review-list li:hover {
      background-color: #fbfaf9;
    }
    .review-list li.hidden {
      display: none;
    }
    .review-list li:last-child {
      border-bottom: none;
      border-radius: 0 0 8px 8px;
    }

    /* ===== ì¹´ë“œ í•˜ë‹¨ â€œë” ë³´ê¸°/ì ‘ê¸°â€ ë²„íŠ¼ ===== */
    .actions {
      display: flex;
      justify-content: space-between;
      border-top: 1px solid #ebebeb;
      background-color: #fff;
    }
    .actions .btn-expand,
    .actions .btn-collapse {
      flex: 1;
      font-size: 1rem;
      font-weight: 600;
      color: #ff5a5f;
      background-color: transparent;
      border: none;
      cursor: pointer;
      padding: 12px 0;
      transition: color 0.2s ease;
      line-height: 1;
    }
    .actions .btn-collapse.hidden {
      display: none;
    }
    .actions .separator {
      width: 1px;
      background-color: #ebebeb;
      margin: 8px 0;
    }

    /* ===== êµ¬ë¶„ì„  ===== */
    .divider {
      height: 16px;
      background-color: #fafafa;
    }

    /* ===== ë°˜ì‘í˜• ===== */
    @media (max-width: 600px) {
      .topic-header {
        padding: 12px 16px;
      }
      .topic-header h3 {
        font-size: 1rem;
      }
      .review-list li {
        padding: 12px 16px;
        font-size: 0.9rem;
      }
      .actions .btn-expand,
      .actions .btn-collapse {
        padding: 10px 0;
        font-size: 0.95rem;
      }
      .actions .separator {
        margin: 6px 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Shoä¸‰Room ë¦¬ë·° ë¶„ì„</h1>

    <!-- í† í”½ í•„í„° ë²„íŠ¼ -->
    <div class="filter-group">
      <button class="filter-btn active" data-topic="All">ì „ì²´ ë³´ê¸°</button>
      {% for topic in topics.keys() %}
        <button class="filter-btn" data-topic="{{ topic }}">{{ topic }}</button>
      {% endfor %}
    </div>

    <!-- ë¦¬ë·° ì¹´ë“œë“¤ -->
    {% for topic, sentences in topics.items() %}
      <div class="topic-card" data-topic="{{ topic }}" id="card-{{ loop.index }}">
        <!-- ì¹´ë“œ í—¤ë”: ì•„ì´ì½˜ + ì œëª© -->
        <div class="topic-header">
          <span class="topic-icon">
            {% if topic == 'ì²­ê²°ë„' %}ğŸ§¼{% elif topic == 'ìœ„ì¹˜' %}ğŸ“{% elif topic == 'ê°€ê²©' %}ğŸ’°{% elif topic == 'ì‹œì„¤' %}ğŸ›‹ï¸{% elif topic == 'í˜¸ìŠ¤íŠ¸' %}ğŸ¤{% elif topic == 'ì†ŒìŒ' %}ğŸ”‡{% endif %}
          </span>
          <h3>{{ topic }}</h3>
        </div>

        <!-- ë¦¬ë·° ë¦¬ìŠ¤íŠ¸ -->
        <ul class="review-list" id="list-{{ loop.index }}">
          {% for sentence in sentences %}
            <li class="{{ 'hidden' if loop.index > 5 else '' }}">
              {{ sentence | replace("ê¹”ë”", '<span class="highlight-clean">ê¹”ë”</span>') | safe }}
            </li>
          {% endfor %}
        </ul>

        <!-- í•˜ë‹¨ ë²„íŠ¼: ë” ë³´ê¸° / ì ‘ê¸° -->
        {% if sentences|length > 5 %}
          <div class="actions">
            <button class="btn-expand"
                    onclick="expandList({{ loop.index }})"
                    id="btn-expand-{{ loop.index }}"
                    data-shown="5">
              â–¼ ë” ë³´ê¸°
            </button>
            <div class="separator"></div>
            <button class="btn-collapse hidden"
                    onclick="collapseList({{ loop.index }})"
                    id="btn-collapse-{{ loop.index }}">
              â–² ì ‘ê¸°
            </button>
          </div>
        {% endif %}
      </div>
      <div class="divider"></div>
    {% endfor %}
  </div>

  <script>
    // ===== í† í”½ í•„í„° ë¡œì§ =====
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        // ë²„íŠ¼ í™œì„± ìƒíƒœ í† ê¸€
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const selectedTopic = btn.dataset.topic;
        document.querySelectorAll('.topic-card').forEach(card => {
          card.style.display = (selectedTopic === 'All' || card.dataset.topic === selectedTopic)
            ? 'block'
            : 'none';
        });

        // ì•„ë¬´ ìŠ¤í¬ë¡¤ ë™ì‘ ì—†ìŒ â†’ ì¹´ë“œê°€ ì ˆëŒ€ ìœ„ì¹˜ ê³ ì •
      });
    });

    // ===== â€œë” ë³´ê¸°â€ ê¸°ëŠ¥ =====
    function expandList(index) {
      const listItems = document.querySelectorAll(`#list-${index} li`);
      const btnExpand = document.getElementById(`btn-expand-${index}`);
      const btnCollapse = document.getElementById(`btn-collapse-${index}`);
      let shownCount = parseInt(btnExpand.dataset.shown);
      const totalCount = listItems.length;
      const nextCount = Math.min(shownCount + 5, totalCount);
      listItems.forEach((item, idx) => {
        if (idx < nextCount) item.style.display = "list-item";
      });
      btnExpand.dataset.shown = nextCount;
      btnCollapse.classList.remove("hidden");
      if (nextCount >= totalCount) {
        btnExpand.style.display = "none";
      }
    }

    // ===== â€œì ‘ê¸°â€ ê¸°ëŠ¥ =====
    function collapseList(index) {
      const listItems = document.querySelectorAll(`#list-${index} li`);
      const btnExpand = document.getElementById(`btn-expand-${index}`);
      const btnCollapse = document.getElementById(`btn-collapse-${index}`);
      listItems.forEach((item, idx) => {
        item.style.display = idx < 5 ? "list-item" : "none";
      });
      btnExpand.style.display = "block";
      btnExpand.dataset.shown = 5;
      btnCollapse.classList.add("hidden");
    }

    // ===== ì´ˆê¸°í™” =====
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll("ul[id^='list-']").forEach(list => {
        const items = list.querySelectorAll("li");
        items.forEach((item, idx) => {
          if (idx >= 5) item.style.display = "none";
        });
      });
    });
  </script>
</body>
</html>